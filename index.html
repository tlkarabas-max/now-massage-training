<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOW Massage - Schedule Optimization Training (Upgraded)</title>
    <style>
        body {
            font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
            background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg,#667eea,#764ba2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }
        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            white-space: nowrap;
        }
        .tab:hover,.tab.active {
            color: #667eea;
        }
        .tab.active {
            border-bottom-color: #667eea;
            font-weight: 600;
        }
        .content { display: none; }
        .content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px);}
            to { opacity: 1; transform: translateY(0);}
        }
        .directions-box {
            background: #e0e7ff;
            border: 1px solid #6366f1;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        .schedule-controls {
            margin-bottom: 15px;
        }
        .schedule-controls label, .schedule-controls select, .schedule-controls button {
            margin-right: 10px;
        }
        .btn {
            border: none;
            border-radius: 6px;
            padding: 8px 18px;
            font-size: 1em;
            cursor: pointer;
            margin-right: 4px;
            margin-top: 4px;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        .schedule-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: #f7f7fa;
            border-radius: 12px;
            overflow-x: auto;
            margin-bottom: 20px;
        }
        .time-slot {
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
            border-radius: 8px;
            background: white;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            user-select: none;
            transition: background 0.2s;
        }
        .time-slot.header {
            background: #667eea;
            color: white;
            font-weight: bold;
            border: 1px solid #667eea;
        }
        .time-slot.time-header {
            background: #f0f4ff;
            color: #667eea;
            font-weight: bold;
        }
        .booked-80 { background: #3866e6; color: #fff; font-weight: bold;}
        .booked-50 { background: #38b66e; color: #fff; font-weight: bold;}
        .booked-25 { background: #38b6e6; color: #fff; font-weight: bold;}
        .gap { background: #f9c846; color: #222; font-weight: bold;}
        .open { background: #e2f7e2; color: #333;}
        .break { background: #a259ec; color: #fff;}
        .lunch { background: #b5b5b5; color: #fff;}
        .callout { background: #e64c3c; color: #fff; font-weight: bold;}
        .stat-card {
            display: inline-block;
            background: #f5f5fa;
            border-radius: 8px;
            padding: 12px 20px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        .stat-value {
            font-size: 1.4em;
            font-weight: 600;
            color: #667eea;
        }
        .stat-label {
            font-size: 1em;
            color: #666;
        }
        .score-panel {
            display: flex;
            gap: 24px;
            margin-bottom: 12px;
        }
        .score {
            background: #f5f5fa;
            border-radius: 8px;
            padding: 12px 20px;
            text-align: center;
        }
        .score-label {
            font-size: 1em;
            color: #666;
        }
        .displaced-box {
            background: #f4f4fc;
            border-radius: 8px;
            padding: 12px 20px;
            margin-bottom: 8px;
        }
        .hint-box {
            background: #f9fafc;
            border-radius: 8px;
            padding: 12px 20px;
            margin-bottom: 8px;
            color: #3866e6;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <div class="logo">NOW</div>
            Schedule Optimization Training (Upgraded)
        </h1>
        <div class="subtitle">Master the art of maximizing revenue through smart scheduling</div>
        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">Overview</button>
            <button class="tab" onclick="showTab('simulator')">Schedule Simulator</button>
            <button class="tab" onclick="showTab('calculator')">Revenue Calculator</button>
            <button class="tab" onclick="showTab('scenarios')">Practice Scenarios</button>
            <button class="tab" onclick="showTab('quiz')">Knowledge Quiz</button>
            <button class="tab" onclick="showTab('templates')">Script Templates</button>
            <button class="tab" onclick="showTab('progress')">Progress Tracker</button>
        </div>

        <!-- PRACTICE SCENARIOS -->
        <div id="scenarios" class="content">
            <h2>Practice Scenarios</h2>
            <div class="directions-box">
                <strong>Step-by-step Directions for Trainees:</strong><br>
                1. Select the Day and Scenario (Easy, Medium, Hard) you want to practice.<br>
                2. Read the scenario description and review the "Optimal Solution" and "Avoid" advice.<br>
                3. Note any displaced appointments and instructions.<br>
                4. Switch to the <span style="color:#667eea;font-weight:bold;">Schedule Simulator</span> tab.<br>
                5. Apply what you've learned by adjusting the schedule to meet the scenario goals.<br>
                6. Use "Show Solution" or "Hint" buttons for guidance.<br>
                7. When finished, check your results and compare to the optimal solution.
            </div>
            <div class="schedule-controls">
                <label for="scenarioDay">Day:</label>
                <select id="scenarioDay"></select>
                <label for="scenarioNum">Scenario:</label>
                <select id="scenarioNum"></select>
                <button class="btn btn-primary" onclick="loadPracticeScenario()">Load Scenario</button>
            </div>
            <div id="practiceScenarioBox"></div>
        </div>

        <!-- SCHEDULE SIMULATOR -->
        <div id="simulator" class="content">
            <h2>Interactive Schedule Simulator</h2>
            <div class="directions-box">
                <strong>Step-by-step Directions for Trainees:</strong><br>
                1. Select the Day and Scenario to load the full business day schedule grid.<br>
                2. Drag and drop appointments between slots to optimize the schedule.<br>
                3. Use the “Add Massage” panel below to drag new appointments into open slots.<br>
                4. You can also click any slot to cycle its type.<br>
                5. Fix gaps, avoid mistakes, and optimize coverage especially in the late afternoon and evening.<br>
                6. Use "Hint" or "Show Solution" buttons for help.<br>
                7. Review your work and compare to the optimal solution.
            </div>
            <div class="schedule-controls">
                <label for="simDay">Day:</label>
                <select id="simDay"></select>
                <label for="simScenario">Scenario:</label>
                <select id="simScenario"></select>
                <button class="btn btn-primary" onclick="loadSimulatorScenario()">Load Scenario</button>
                <button class="btn btn-secondary" onclick="clearSchedule()">Clear Schedule</button>
            </div>
            <div id="addMassagePanel" style="margin-bottom:24px;">
                <strong>Add Massage:</strong>
                <div style="display:flex; gap:10px; margin-top:8px;">
                    <div class="time-slot booked-80" draggable="true" ondragstart="dragStart(event)" data-type="booked_80">80m</div>
                    <div class="time-slot booked-50" draggable="true" ondragstart="dragStart(event)" data-type="booked_50">50m</div>
                    <div class="time-slot booked-25" draggable="true" ondragstart="dragStart(event)" data-type="booked_25">25m</div>
                </div>
            </div>
            <div class="schedule-grid" id="scheduleGrid"></div>
            <div class="score-panel">
                <div class="score">
                    <span id="movesCount">0</span>
                    <span class="score-label">Moves</span>
                </div>
                <div class="score">
                    <span id="gapsFixedCount">0</span>
                    <span class="score-label">Gaps Fixed</span>
                </div>
                <div class="score">
                    <span id="revenueSaved">$0</span>
                    <span class="score-label">Revenue Saved</span>
                </div>
                <div class="score">
                    <span id="gradeValue">--</span>
                    <span class="score-label">Grade</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="utilizationRate">0%</div>
                <div class="stat-label">Utilization Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="gapCount">0</div>
                <div class="stat-label">Gaps</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="optimalPatterns">0</div>
                <div class="stat-label">Optimal Patterns</div>
            </div>
            <div id="displacedAppointmentsBox" class="displaced-box" style="display:none;">
                <strong>Displaced Appointments:</strong>
                <ul id="displacedAppointmentsList"></ul>
            </div>
            <div id="hintBox" class="hint-box" style="display:none;"></div>
            <div class="controls">
                <button class="btn btn-secondary" onclick="showHint()">Hint</button>
                <button class="btn btn-primary" onclick="showSolution()">Show Solution</button>
                <button class="btn btn-secondary" onclick="nextSimulatorScenario()">Next Scenario</button>
            </div>
        </div>
        <!-- ... rest of your tabs ... -->
    </div>
<script>
/* ---- CONFIG ---- */
const BUSINESS_HOURS = {
  sunday:    { open: "9:00", close: "20:00" },
  monday:    { open: "9:00", close: "20:00" },
  tuesday:   { open: "9:00", close: "20:00" },
  wednesday: { open: "9:00", close: "20:00" },
  thursday:  { open: "9:00", close: "20:00" },
  friday:    { open: "9:00", close: "21:00" },
  saturday:  { open: "9:00", close: "21:00" }
};
const THERAPISTS = ["Emma", "Sofia", "James", "Olivia", "Liam", "Ava"];
const BLOCK_TYPES = {
    "booked_80": {label: "80m", colorclass: "booked-80"},
    "booked_50": {label: "50m", colorclass: "booked-50"},
    "booked_25": {label: "25m", colorclass: "booked-25"},
    "gap": {label: "GAP", colorclass: "gap"},
    "open": {label: "OPEN", colorclass: "open"},
    "break": {label: "Break", colorclass: "break"},
    "lunch": {label: "Lunch", colorclass: "lunch"},
    "callout": {label: "Call-out", colorclass: "callout"}
};

/* ---- Generate Time Slot Array ---- */
function generateTimeSlots(day) {
    let times = [];
    let hours = BUSINESS_HOURS[day];
    let [openH, openM] = hours.open.split(':').map(Number);
    let [closeH, closeM] = hours.close.split(':').map(Number);
    let dt = new Date(2020,0,1,openH,openM);
    let end = new Date(2020,0,1,closeH,closeM);
    while(dt < end) {
        let s = dt.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
        times.push(s);
        dt.setMinutes(dt.getMinutes()+30);
    }
    return times;
}

/* ---- Scenario Generator: includes late appointments ---- */
function makeFullDayScenario(type, day) {
    const times = generateTimeSlots(day);
    return THERAPISTS.map((t, i) => ({
        therapist: t,
        slots: times.map((tm, idx) => {
            // Fill late slots with appointments, gaps, breaks, or callouts
            if (idx >= times.length - 5) {
                if (type === "easy") {
                    return (idx % 2 === 0) ? "booked_80" : "booked_50";
                }
                if (type === "medium") {
                    return (i % 2 === 0 && idx % 2 === 0) ? "booked_80" :
                           (i % 2 === 1 && idx % 3 === 0) ? "booked_50" : "gap";
                }
                if (type === "hard") {
                    return (i === 0 && idx === times.length - 1) ? "callout" :
                           (idx % 3 === 0) ? "gap" : "open";
                }
            }
            // Lunch and breaks
            if (type === "medium" && idx === Math.floor(times.length/2)) return "lunch";
            if (type === "hard" && idx === Math.floor(times.length/3)) return "break";
            if (type === "hard" && idx === Math.floor(times.length/4)) return "callout";
            // Morning and midday logic
            if (type === "easy") return (idx % 3 === 0) ? "booked_80" : "booked_50";
            if (type === "medium") return (idx % 4 === 1) ? "booked_80" : "open";
            if (type === "hard") return (idx % 5 === 0) ? "gap" : "open";
            return "open";
        })
    }));
}

/* ---- Scenarios Data (full day, late appts) ---- */
const ALL_SCENARIOS = {};
["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(day=>{
  ALL_SCENARIOS[day] = [
    {
      name: `${capitalize(day)} Easy: Full Day Bookings`,
      description: "Book most slots throughout the day, including late appointments. Fill gaps as needed.",
      displaced: [],
      schedule: makeFullDayScenario("easy", day),
      correctMoves: ["Fill gaps throughout the day", "Maximize utilization, especially in late slots"],
      incorrectMoves: ["Leaving gaps during late hours", "Unused evening slots"]
    },
    {
      name: `${capitalize(day)} Medium: Staggered & Evening Coverage`,
      description: "Stagger breaks/lunches, and maintain coverage in late afternoon/evening.",
      displaced: [],
      schedule: makeFullDayScenario("medium", day),
      correctMoves: ["Stagger breaks", "Fill gaps in late slots", "Limit callouts"],
      incorrectMoves: ["Multiple gaps in evening", "All at lunch at once"]
    },
    {
      name: `${capitalize(day)} Hard: Gaps, Callouts, Late Optimization`,
      description: "Handle callouts, breaks, and evening gaps; optimize for revenue.",
      displaced: ["Emma (callout late)", "James (break midday)"],
      schedule: makeFullDayScenario("hard", day),
      correctMoves: ["Fill late gaps", "Recover from callouts", "Optimize breaks"],
      incorrectMoves: ["Leaving therapists unused after 5 PM", "Too many gaps in evening"]
    }
  ];
});
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

const DAY_LIST = Object.keys(BUSINESS_HOURS);

/* ---- UI Tab Logic ---- */
function showTab(tab) {
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
    document.querySelector(`[onclick="showTab('${tab}')"]`).classList.add('active');
    document.getElementById(tab).classList.add('active');
    if(tab === "scenarios") renderScenarioControls();
    if(tab === "simulator") renderSimulatorControls();
}

/* ---- PRACTICE SCENARIOS LOGIC ---- */
function renderScenarioControls() {
    let daySel = document.getElementById('scenarioDay');
    let scenSel = document.getElementById('scenarioNum');
    daySel.innerHTML = DAY_LIST.map(d=>`<option value="${d}">${capitalize(d)}</option>`).join('');
    let scens = ALL_SCENARIOS[DAY_LIST[0]];
    scenSel.innerHTML = scens.map((s,i)=>`<option value="${i}">Scenario ${i+1} (${['Easy','Medium','Hard'][i]})</option>`).join('');
    daySel.onchange = function() {
        let scens = ALL_SCENARIOS[daySel.value];
        scenSel.innerHTML = scens.map((s,i)=>`<option value="${i}">Scenario ${i+1} (${['Easy','Medium','Hard'][i]})</option>`).join('');
    };
}
function loadPracticeScenario() {
    let day = document.getElementById('scenarioDay').value;
    let idx = +document.getElementById('scenarioNum').value;
    let scenario = ALL_SCENARIOS[day][idx];
    let box = document.getElementById('practiceScenarioBox');
    box.innerHTML = `
        <h3>${scenario.name}</h3>
        <div>${scenario.description}</div>
        ${scenario.displaced && scenario.displaced.length ? `<div class="displaced-box"><strong>Displaced Appointments:</strong><ul>${scenario.displaced.map(d=>`<li>${d}</li>`).join('')}</ul></div>` : ''}
        <div class="hint-box"><strong>Optimal Solution:</strong><br>${scenario.correctMoves.join('<br>')}</div>
        <div style="background:#ffe4c2;border-radius:8px;padding:10px;margin-top:8px;"><strong>Avoid:</strong><br>${scenario.incorrectMoves.join('<br>')}</div>
    `;
}

/* ---- SCHEDULE SIMULATOR LOGIC ---- */
function renderSimulatorControls() {
    let daySel = document.getElementById('simDay');
    let scenSel = document.getElementById('simScenario');
    daySel.innerHTML = DAY_LIST.map(d=>`<option value="${d}">${capitalize(d)}</option>`).join('');
    let scens = ALL_SCENARIOS[DAY_LIST[0]];
    scenSel.innerHTML = scens.map((s,i)=>`<option value="${i}">Scenario ${i+1} (${['Easy','Medium','Hard'][i]})</option>`).join('');
    daySel.onchange = function() {
        let scens = ALL_SCENARIOS[daySel.value];
        scenSel.innerHTML = scens.map((s,i)=>`<option value="${i}">Scenario ${i+1} (${['Easy','Medium','Hard'][i]})</option>`).join('');
    };
}
let moves = 0;
function loadSimulatorScenario() {
    let day = document.getElementById('simDay').value;
    let idx = +document.getElementById('simScenario').value;
    let scenario = ALL_SCENARIOS[day][idx];
    renderScheduleGrid(day, scenario);
    moves = 0;
    document.getElementById('movesCount').textContent = moves;
    hideHint();
}
function clearSchedule() {
    let day = document.getElementById('simDay').value;
    let times = generateTimeSlots(day);
    let grid = document.getElementById('scheduleGrid');
    grid.innerHTML = '';
    grid.innerHTML += `<div class="time-slot header">Time</div>`;
    THERAPISTS.forEach(t=>grid.innerHTML+=`<div class="time-slot header">${t}</div>`);
    for(let t=0;t<times.length;t++) {
        grid.innerHTML+=`<div class="time-slot time-header">${times[t]}</div>`;
        for(let i=0;i<THERAPISTS.length;i++) {
            grid.innerHTML+=`<div class="time-slot open" data-type="open" data-tidx="${i}" data-time="${times[t]}" data-slot-id="${t+'-'+i}" draggable="true" ondragstart="slotDragStart(event)" ondragover="allowDrop(event)" ondrop="dropSlot(event)" onclick="toggleSlot(this)"></div>`;
        }
    }
}
function nextSimulatorScenario() {
    let daySel = document.getElementById('simDay');
    let scenSel = document.getElementById('simScenario');
    let day = daySel.value;
    let idx = +scenSel.value;
    let scens = ALL_SCENARIOS[day];
    idx = (idx+1)%scens.length;
    scenSel.value = idx;
    loadSimulatorScenario();
}
function showHint() {
    let box = document.getElementById('hintBox');
    box.style.display = "block";
    box.textContent = "Tip: Drag appointments to fill gaps, focus on late day coverage!";
}
function hideHint() {
    let box = document.getElementById('hintBox');
    box.style.display = "none";
}
function showSolution() {
    let day = document.getElementById('simDay').value;
    let idx = +document.getElementById('simScenario').value;
    let scenario = ALL_SCENARIOS[day][idx];
    let box = document.getElementById('hintBox');
    box.style.display = "block";
    box.innerHTML = `<strong>Optimal Solution:</strong><br>${scenario.correctMoves.join('<br>')}`;
}

/* ---- Drag-and-Drop Logic ---- */
let draggedType = null;
let draggedSlot = null;
function dragStart(e) {
    draggedType = e.target.dataset.type;
    draggedSlot = null;
    e.dataTransfer.effectAllowed = "move";
}
function allowDrop(e) {
    e.preventDefault();
}
function dropSlot(e) {
    e.preventDefault();
    let slot = e.target;
    // Dragging from Add Massage panel
    if (draggedType) {
        slot.dataset.type = draggedType;
        slot.className = "time-slot " + (BLOCK_TYPES[draggedType]?.colorclass || "");
        slot.textContent = BLOCK_TYPES[draggedType]?.label || "";
        moves++;
        document.getElementById('movesCount').textContent = moves;
        hideHint();
        draggedType = null;
        draggedSlot = null;
        updateScheduleStats();
        return;
    }
    // Dragging another slot, swap types
    if (draggedSlot) {
        let fromSlot = document.querySelector(`[data-slot-id='${draggedSlot}']`);
        let tempType = slot.dataset.type;
        let tempLabel = slot.textContent;
        let tempClass = slot.className;
        slot.dataset.type = fromSlot.dataset.type;
        slot.className = fromSlot.className;
        slot.textContent = fromSlot.textContent;
        fromSlot.dataset.type = tempType;
        fromSlot.className = tempClass;
        fromSlot.textContent = tempLabel;
        moves++;
        document.getElementById('movesCount').textContent = moves;
        hideHint();
        draggedType = null;
        draggedSlot = null;
        updateScheduleStats();
        return;
    }
}
function slotDragStart(e) {
    draggedType = e.target.dataset.type;
    draggedSlot = e.target.dataset.slotId;
    e.dataTransfer.effectAllowed = "move";
}

/* ---- Click to cycle slot type ---- */
const CYCLE_TYPES = ["open","booked_80","booked_50","booked_25","gap","break","lunch","callout"];
function toggleSlot(slot) {
    let cur = slot.dataset.type || "open";
    let idx = CYCLE_TYPES.indexOf(cur);
    let nextType = CYCLE_TYPES[(idx+1)%CYCLE_TYPES.length];
    slot.dataset.type = nextType;
    slot.className = "time-slot " + (BLOCK_TYPES[nextType]?.colorclass || "");
    slot.textContent = BLOCK_TYPES[nextType]?.label || "";
    moves++;
    document.getElementById('movesCount').textContent = moves;
    hideHint();
    updateScheduleStats();
}

/* ---- Render Schedule Grid ---- */
function renderScheduleGrid(day, scenario) {
    let times = generateTimeSlots(day);
    let grid = document.getElementById('scheduleGrid');
    let therapists = THERAPISTS;
    grid.innerHTML = '';
    grid.innerHTML += `<div class="time-slot header">Time</div>`;
    therapists.forEach(t=>grid.innerHTML+=`<div class="time-slot header">${t}</div>`);
    let slotId = 0;
    for(let t=0;t<times.length;t++) {
        grid.innerHTML+=`<div class="time-slot time-header">${times[t]}</div>`;
        for(let i=0;i<therapists.length;i++) {
            let type = (scenario.schedule[i] && scenario.schedule[i].slots[t]) || '';
            let block = BLOCK_TYPES[type] || {label:"",colorclass:""};
            grid.innerHTML+=`<div class="time-slot ${block.colorclass}" data-type="${type}" data-tidx="${i}" data-time="${times[t]}" data-slot-id="${t+'-'+i}" draggable="true" ondragstart="slotDragStart(event)" ondragover="allowDrop(event)" ondrop="dropSlot(event)" onclick="toggleSlot(this)">${block.label||""}</div>`;
            slotId++;
        }
    }
    updateScheduleStats();
}

/* ---- Schedule Stats ---- */
function updateScheduleStats() {
    let slots = document.querySelectorAll('.schedule-grid .time-slot:not(.header):not(.time-header)');
    let booked = 0, gaps = 0, open = 0, optimal = 0;
    slots.forEach(s=>{
        let type = s.dataset.type;
        if(type==="open") open++;
        if(type==="gap") gaps++;
        if(type && type.startsWith("booked")) booked++;
        if(type==="booked_80" || type==="booked_50") optimal++;
    });
    let total = slots.length;
    let utilization = Math.round(100*booked/total);
    document.getElementById('utilizationRate').textContent = utilization+"%";
    document.getElementById('gapCount').textContent = gaps;
    document.getElementById('optimalPatterns').textContent = optimal;
    document.getElementById('gapsFixedCount').textContent = gaps === 0 ? "All" : (total-gaps);
    document.getElementById('revenueSaved').textContent = "$"+(booked*120);
    document.getElementById('gradeValue').textContent = utilization>80 && gaps===0 ? "A" : utilization>70 ? "B" : "C";
}

/* ---- INIT ---- */
window.onload = function() {
    showTab('overview');
    renderScenarioControls();
    renderSimulatorControls();
};
</script>
</body>
</html>
