<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Optimization Training Scenario 2 – 48-Hour Review</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f4f6fa;
      margin: 0;
      padding: 0;
    }
    .header {
      background: #2d3d61;
      color: #fff;
      padding: 24px 0 14px 0;
      text-align: center;
      box-shadow: 0 3px 12px rgba(44,70,131,0.08);
    }
    .header h1 {
      margin: 0;
      font-size: 2em;
      font-weight: 600;
    }
    .main-container {
      display: flex;
      flex-wrap: wrap;
      margin: 40px auto;
      max-width: 1350px;
      gap: 38px;
    }
    .sidebar {
      width: 270px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 1px 8px rgba(0,0,0,0.07);
      padding: 30px 18px 18px 18px;
      height: fit-content;
      min-width: 200px;
      margin-bottom: 24px;
    }
    .sidebar h3 {
      margin-top: 0;
      font-size: 1.2em;
      color: #4861a5;
      margin-bottom: 16px;
      font-weight: 700;
    }
    .therapist-list, .session-list {
      list-style: none;
      padding: 0;
      margin: 0 0 14px 0;
    }
    .therapist-list li, .session-list li {
      margin-bottom: 8px;
      padding: 8px 12px 8px 10px;
      background: #e6f0ff;
      border-radius: 7px;
      color: #324b6c;
      cursor: grab;
      transition: background 0.2s;
      position: relative;
      font-size: 1em;
      font-weight: 500;
      user-select: none;
    }
    .therapist-list li:hover, .session-list li:hover {
      background: #d2e3fc;
    }
    .remove-btn {
      position: absolute;
      right: 8px;
      top: 5px;
      color: #c00;
      background: none;
      border: none;
      font-size: 1em;
      cursor: pointer;
      padding: 0;
    }
    .add-controls {
      display: flex;
      margin-bottom: 12px;
      gap: 5px;
    }
    .add-controls input {
      flex: 1;
      font-size: 1em;
      padding: 4px 8px;
      border-radius: 4px;
      border: 1px solid #b0c4de;
    }
    .add-controls button {
      padding: 4px 10px;
      border-radius: 4px;
      border: none;
      background: #4861a5;
      color: white;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
    }
    .add-controls button:hover {
      background: #2d3d61;
    }
    .scenario-block {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 1px 8px rgba(0,0,0,0.08);
      flex: 1;
      min-width: 330px;
      padding: 32px;
      margin-bottom: 40px;
    }
    .scenario-block h2 {
      margin-top: 0;
      color: #2d3d61;
      font-size: 1.3em;
      font-weight: 700;
      margin-bottom: 22px;
      letter-spacing: 0.5px;
    }
    .scenario-block .instructions, .scenario-block .edu {
      background: #f7fbff;
      padding: 14px 18px;
      border-radius: 8px;
      margin-bottom: 18px;
      color: #475a8c;
      font-size: 1.05em;
      line-height: 1.5;
    }
    .time-controls {
      margin: 18px 0 7px 0;
      display: flex;
      gap: 6px;
      align-items: center;
    }
    .time-controls input {
      font-size: 1em;
      padding: 2px 8px;
      border-radius: 4px;
      border: 1px solid #b0c4de;
      width: 80px;
    }
    .time-controls button {
      padding: 4px 10px;
      border-radius: 4px;
      border: none;
      background: #4861a5;
      color: white;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
    }
    .time-controls button:hover {
      background: #2d3d61;
    }
    .remove-time-btn {
      background: #c00 !important;
      color: #fff !important;
      margin-left: 4px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 1em;
      border: none;
      padding: 2px 6px;
      margin-top: 2px;
    }
    .week-grid {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin-bottom: 24px;
      font-size: 1em;
    }
    .week-grid th, .week-grid td {
      text-align: center;
      padding: 8px;
      min-width: 110px;
      border: 1px solid #e3e7ed;
      background: #fff;
    }
    .week-grid th {
      background: #e7f1ff;
      color: #32547f;
      font-size: 1em;
      font-weight: 600;
    }
    .week-grid .timeslot {
      background: #f7fbff;
      color: #5b6d8b;
      font-weight: 500;
      width: 90px;
    }
    .session-card {
      display: inline-block;
      background: #fbeed7;
      color: #965c09;
      padding: 7px 16px;
      margin: 2px 0;
      border-radius: 7px;
      font-size: 0.97em;
      font-weight: 500;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      cursor: grab;
      user-select: none;
      transition: box-shadow 0.1s;
      border: 1px solid #f6e2b9;
    }
    .session-card:hover {
      box-shadow: 0 2px 6px rgba(200,150,0,0.10);
      background: #ffe1a4;
    }
    .drop-target {
      min-height: 44px;
      border-radius: 6px;
      background: #f6f9fc;
      border: 1.5px dashed #c3cbe5;
      opacity: 0.7;
      transition: background 0.15s;
      margin: 2px 0;
      box-sizing: border-box;
      position: relative;
    }
    .week-grid td .drop-target {
      margin: 0 auto;
      width: 90%;
    }
    .feedback-block {
      background: #fffbe9;
      border-left: 6px solid #f3c161;
      padding: 18px 24px;
      border-radius: 7px;
      margin-bottom: 22px;
      color: #86612c;
      font-size: 1.07em;
    }
    .reveal-btn {
      background: #f3c161;
      color: #2d3d61;
      border: none;
      font-size: 1.15em;
      font-weight: 700;
      border-radius: 6px;
      padding: 12px 28px;
      margin: 18px 0 0 0;
      cursor: pointer;
      box-shadow: 0 1px 6px rgba(243,193,97,0.13);
      transition: background 0.2s;
      display: block;
    }
    .reveal-btn:hover {
      background: #ffe1a4;
    }
    .quiz-block {
      background: #e5f4e6;
      border-left: 5px solid #6ac17b;
      padding: 14px 20px;
      border-radius: 7px;
      margin-bottom: 18px;
      color: #39824f;
      font-size: 1.04em;
    }
    .quiz-block label {
      display: block;
      margin: 10px 0 0 0;
      font-weight: 500;
      font-size: 1em;
      cursor: pointer;
    }
    .quiz-block input[type="radio"] {
      margin-right: 8px;
    }
    @media (max-width: 900px) {
      .main-container {
        flex-direction: column;
        gap: 0;
      }
      .sidebar {
        width: 100%;
        min-width: unset;
        margin-bottom: 24px;
      }
      .scenario-block {
        min-width: unset;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Scenario 2: 48-Hour Review – Find 5 Areas to Fix</h1>
    <div style="font-size: 1.15em; margin-top: 12px; color: #e3e7ed;">
      Interactive Scheduling Optimization Training
    </div>
  </div>
  <div class="main-container">
    <aside class="sidebar">
      <h3>Therapists</h3>
      <div class="add-controls">
        <input id="addTherapistInput" type="text" placeholder="Add therapist..." />
        <button onclick="addTherapist()">Add</button>
      </div>
      <ul class="therapist-list" id="therapistList">
        <li draggable="true">Madison Jeske <button class="remove-btn" onclick="removeTherapist(this)">×</button></li>
        <li draggable="true">Di Fisher <button class="remove-btn" onclick="removeTherapist(this)">×</button></li>
        <li draggable="true">Nicole Ortiz <button class="remove-btn" onclick="removeTherapist(this)">×</button></li>
        <li draggable="true">Angela McNally <button class="remove-btn" onclick="removeTherapist(this)">×</button></li>
        <li draggable="true">Edward Franklin <button class="remove-btn" onclick="removeTherapist(this)">×</button></li>
        <li draggable="true">Mariaelena Parra <button class="remove-btn" onclick="removeTherapist(this)">×</button></li>
        <li draggable="true">Cheyenne Bringham <button class="remove-btn" onclick="removeTherapist(this)">×</button></li>
      </ul>
      <h3>Sessions</h3>
      <div class="add-controls">
        <input id="addSessionInput" type="text" placeholder="Add session..." />
        <button onclick="addSession()">Add</button>
      </div>
      <ul class="session-list" id="sessionList">
        <li draggable="true">Session: Nicole <button class="remove-btn" onclick="removeSession(this)">×</button></li>
        <li draggable="true">Session: Angela <button class="remove-btn" onclick="removeSession(this)">×</button></li>
        <li draggable="true">Session: Madison <button class="remove-btn" onclick="removeSession(this)">×</button></li>
        <li draggable="true">Session: Di <button class="remove-btn" onclick="removeSession(this)">×</button></li>
        <li draggable="true">Session: Edward <button class="remove-btn" onclick="removeSession(this)">×</button></li>
        <li draggable="true">Session: Mariaelena <button class="remove-btn" onclick="removeSession(this)">×</button></li>
      </ul>
    </aside>
    <main class="scenario-block">
      <h2>Instructions</h2>
      <div class="instructions">
        <strong>Review the schedule grid for 48 hours out.</strong><br>
        Identify <strong>5 areas to fix</strong:
        <ul>
          <li>Multiple gaps between appointments</li>
          <li>Misaligned breaks</li>
          <li>Inefficient booking patterns</li>
          <li>Overlapping or double-booked sessions</li>
          <li>Unassigned therapists</li>
        </ul>
        <br>
        <strong>Drag and drop</strong> therapists or sessions into the schedule. Add or remove time slots, therapists, and sessions as needed.<br>
        When ready, click <b>Reveal</b> to see interactive feedback, revenue loss calculation, and explanations.
      </div>
      <div class="edu">
        <strong>What is Optimization?</strong><br>
        Optimization is the process of making the best or most effective use of resources. In scheduling, it means maximizing appointments, minimizing gaps, and aligning breaks so both therapists and clients benefit. Every missed slot is a lost opportunity—and lost revenue!
      </div>

      <div class="time-controls">
        <input id="addTimeInput" type="text" placeholder="Time (e.g. 8:00)" />
        <button onclick="addTimeSlot()">Add Time Slot</button>
      </div>
      <table class="week-grid" id="weekGrid">
        <thead>
          <tr>
            <th class="timeslot"></th>
            <th>Day 1</th>
            <th>Day 2</th>
          </tr>
        </thead>
        <tbody id="weekGridBody"></tbody>
      </table>
      <button class="reveal-btn" onclick="revealFeedback()">Reveal</button>

      <div id="feedbackContainer"></div>
      <div class="quiz-block">
        <strong>Quiz: What is the best way to reduce lost revenue in scheduling?</strong>
        <label><input type="radio" name="quiz1" onclick="quizFeedback('A')"> Book sessions close together, minimize gaps, and follow client demand.</label>
        <label><input type="radio" name="quiz1" onclick="quizFeedback('B')"> Leave large gaps between sessions for therapist breaks.</label>
        <label><input type="radio" name="quiz1" onclick="quizFeedback('C')"> Overbook therapists for efficiency.</label>
        <div id="quizFeedback" style="margin-top:12px; font-weight:500;"></div>
      </div>
    </main>
  </div>
  <script>
    // --- Scheduler logic ---
    let timeSlots = ["8:00", "8:30", "9:00", "9:30", "10:00", "10:30", "11:00", "11:30", "12:00", "12:30", "1:00"];
    let slotPrices = {
      "8:00": 60, "8:30": 60, "9:00": 60, "9:30": 60, "10:00": 120, "10:30": 60, "11:00": 60, "11:30": 60, "12:00": 120, "12:30": 60, "1:00": 160
    };
    let days = ["Day 1", "Day 2"];
    function renderGrid() {
      const tbody = document.getElementById('weekGridBody');
      tbody.innerHTML = '';
      timeSlots.forEach((slot, idx) => {
        const tr = document.createElement('tr');
        // Time slot cell + remove button
        let tdTime = document.createElement('td');
        tdTime.className = "timeslot";
        tdTime.textContent = slot;
        let btn = document.createElement('button');
        btn.textContent = "×";
        btn.className = "remove-time-btn";
        btn.onclick = function() { removeTimeSlot(idx); };
        tdTime.appendChild(btn);
        tr.appendChild(tdTime);
        for (let day = 0; day < 2; day++) {
          let td = document.createElement('td');
          let drop = document.createElement('div');
          drop.className = "drop-target";
          drop.ondragover = function(e) { e.preventDefault(); drop.style.background="#d2e3fc"; }
          drop.ondragleave = function(e) { drop.style.background=""; }
          drop.ondrop = function(e) {
            e.preventDefault();
            drop.style.background="";
            let data = e.dataTransfer.getData("text/plain");
            let elem = document.getElementById(data);
            if (!elem) {
              // Create a new card from therapist/session list
              let val = e.dataTransfer.getData("text/session");
              if (val) {
                let card = document.createElement('span');
                card.className = "session-card";
                card.textContent = val;
                card.draggable = true;
                card.id = "card-" + Math.random().toString(36).substr(2,9);
                card.ondragstart = dragStartHandler;
                card.ondblclick = function() { card.remove(); };
                drop.appendChild(card);
              }
            } else {
              drop.appendChild(elem);
            }
          };
          td.appendChild(drop);
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      });
    }
    renderGrid();

    function dragStartHandler(e) {
      e.dataTransfer.setData("text/plain", e.target.id);
    }
    function dragStartSessionList(e) {
      e.dataTransfer.setData("text/session", e.target.textContent.replace("×", "").trim());
    }
    function assignSidebarDrag() {
      document.querySelectorAll('#sessionList li, #therapistList li').forEach(li => {
        li.draggable = true;
        li.id = "li-" + Math.random().toString(36).substr(2,9);
        li.ondragstart = dragStartSessionList;
      });
    }
    assignSidebarDrag();

    function addTherapist() {
      let input = document.getElementById('addTherapistInput');
      let val = input.value.trim();
      if (val) {
        let ul = document.getElementById('therapistList');
        let li = document.createElement('li');
        li.textContent = val;
        li.draggable = true;
        li.id = "li-" + Math.random().toString(36).substr(2,9);
        li.ondragstart = dragStartSessionList;
        let btn = document.createElement('button');
        btn.className = "remove-btn";
        btn.textContent = "×";
        btn.onclick = function() { li.remove(); };
        li.appendChild(btn);
        ul.appendChild(li);
        input.value = "";
      }
    }
    function removeTherapist(btn) {
      btn.parentElement.remove();
    }
    function addSession() {
      let input = document.getElementById('addSessionInput');
      let val = input.value.trim();
      if (val) {
        let ul = document.getElementById('sessionList');
        let li = document.createElement('li');
        li.textContent = val;
        li.draggable = true;
        li.id = "li-" + Math.random().toString(36).substr(2,9);
        li.ondragstart = dragStartSessionList;
        let btn = document.createElement('button');
        btn.className = "remove-btn";
        btn.textContent = "×";
        btn.onclick = function() { li.remove(); };
        li.appendChild(btn);
        ul.appendChild(li);
        input.value = "";
      }
    }
    function removeSession(btn) {
      btn.parentElement.remove();
    }
    function addTimeSlot() {
      let input = document.getElementById('addTimeInput');
      let val = input.value.trim();
      if (val && !timeSlots.includes(val)) {
        timeSlots.push(val);
        slotPrices[val] = 60; // Default price, can be edited later
        renderGrid();
        input.value = "";
      }
    }
    function removeTimeSlot(idx) {
      timeSlots.splice(idx, 1);
      renderGrid();
    }

    // --- Feedback/Reveal & Revenue Logic ---
    function revealFeedback() {
      // Get the schedule state
      let tbody = document.getElementById('weekGridBody');
      let lostRevenue = 0;
      let missedSlots = [];
      let explanation = [];
      for (let i = 0; i < timeSlots.length; i++) {
        for (let d = 0; d < 2; d++) {
          let tr = tbody.children[i];
          let td = tr.children[d + 1];
          let drop = td.querySelector(".drop-target");
          if (!drop || drop.children.length === 0) {
            missedSlots.push({time: timeSlots[i], day: days[d], price: slotPrices[timeSlots[i]] || 60});
            lostRevenue += slotPrices[timeSlots[i]] || 60;
          } else if (drop.children.length > 1) {
            explanation.push(`Double booking detected at ${timeSlots[i]} on ${days[d]}.`);
          }
        }
      }
      // Find gaps (non-consecutive bookings)
      let gapCount = 0;
      for (let d = 0; d < 2; d++) {
        let lastBooked = -2;
        for (let i = 0; i < timeSlots.length; i++) {
          let tr = tbody.children[i];
          let td = tr.children[d + 1];
          let drop = td.querySelector(".drop-target");
          if (drop && drop.children.length > 0) {
            if (lastBooked >= 0 && i - lastBooked > 1) gapCount++;
            lastBooked = i;
          }
        }
      }
      if (gapCount > 0) explanation.push(`${gapCount} gap(s) found between booked sessions.`);

      let feedback = `<div class="feedback-block"><strong>Feedback:</strong><br>`;
      feedback += `Total lost revenue from missed slots: <strong style="color:#c00;">$${lostRevenue.toLocaleString()}</strong><br>`;
      feedback += `Missed slots:<ul>`;
      missedSlots.slice(0, 5).forEach(s => {
        feedback += `<li>${s.time} on ${s.day} <span style="color:#c00;">($${s.price})</span></li>`;
      });
      if (missedSlots.length > 5) feedback += `<li>...and ${missedSlots.length-5} more.</li>`;
      feedback += `</ul>`;
      feedback += explanation.length ? `<b>Issues:</b> <ul>` + explanation.map(e=>`<li>${e}</li>`).join("") + `</ul>` : "";
      feedback += `</div>`;
      document.getElementById('feedbackContainer').innerHTML = feedback;
    }

    // --- Quiz logic ---
    function quizFeedback(answer) {
      const feedbackDiv = document.getElementById('quizFeedback');
      if (answer === 'A') {
        feedbackDiv.textContent = "Correct! Optimization means minimizing gaps, booking efficiently, and meeting client demand.";
        feedbackDiv.style.color = "#39824f";
      } else if (answer === 'B') {
        feedbackDiv.textContent = "Not quite! Too many gaps mean lost revenue and therapist downtime.";
        feedbackDiv.style.color = "#86612c";
      } else if (answer === 'C') {
        feedbackDiv.textContent = "Overbooking isn't efficient and can lead to burnout!";
        feedbackDiv.style.color = "#c00";
      }
    }
  </script>
</body>
</html>
